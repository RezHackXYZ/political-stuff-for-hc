<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://fonts.googleapis.com/icon?family=Material+Icons"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <button class="theme-toggle">
            <span class="material-icons">dark_mode</span>
            Theme
        </button>
        <div id="TopTopNav">
            <img id="logo" src="" alt="Hack Club Logo" />
            <div id="container">
                <svg id="parliament"></svg>
                <div id="tooltip"></div>
            </div>
        </div>
        <div style="display: flex; justify-content: center">
            <div class="tab-system">
                <div id="tabsTopNav">
                    <button class="pagesTabIntabsTopNav" data-tab="parties">
                        üë• Parties
                    </button>
                    <button class="pagesTabIntabsTopNav" data-tab="rules">
                        üìú Constitution
                    </button>
                    <div class="tab-indicator"></div>
                </div>
            </div>
        </div>
        <div id="root">
            <div id="parties" class="tab-content active">
                <div id="leadreboardoftop3partyes">
                    <div id="place2" class="places">
                        <div class="placedetails">
                            <div class="top-party-info">
                                <div style="display: flex">
                                    <img
                                        src="https://github.com/sampoder.png"
                                        class="partylogo"
                                        style="margin: 0"
                                    />

                                    <div class="top-party-name">
                                        Innovation Alliance
                                    </div>
                                </div>
                                <div class="top-party-tagline">
                                    "Breaking Barriers, Building Future"
                                </div>
                                <div class="party-stats">
                                    üë§ @sampoder, @claire<br />
                                    #Ô∏è‚É£ #InnovateHC<br />
                                    ‚ù§Ô∏è 1.2K supporters
                                </div>
                            </div>
                        </div>
                        <div id="place2box" class="placebox">
                            <p style="text-align: center">
                                <span style="font-size: larger">
                                    1<sup style="font-size: small">st</sup>
                                </span>
                                <br />
                                45 seats
                            </p>
                        </div>
                    </div>
                    <div id="place1" class="places">
                        <div class="placedetails">
                            <div class="top-party-info">
                                <div style="display: flex">
                                    <img
                                        src="https://github.com/hackclub.png"
                                        class="partylogo"
                                        style="margin: 0"
                                    />
                                    <div class="top-party-name">
                                        Progress Coders
                                    </div>
                                </div>

                                <div class="top-party-tagline">
                                    "Code Today, Shape Tomorrow"
                                </div>
                                <div class="party-stats">
                                    <span
                                        >üë§
                                        <a href="https://example.com">@max</a>,
                                        <a>@alice</a></span
                                    ><br />
                                    <span>#Ô∏è‚É£ <a>#ProgressiveCode</a></span
                                    ><br />
                                    <span>‚ù§Ô∏è 1.5K supporters</span>
                                </div>
                            </div>
                        </div>
                        <div id="place1box" class="placebox">
                            <p style="text-align: center">
                                <span style="font-size: larger">
                                    2<sup style="font-size: small">nd</sup>
                                </span>
                                <br />
                                35 seats
                            </p>
                        </div>
                    </div>
                    <div id="place3" class="places">
                        <div class="placedetails">
                            <div class="top-party-info">
                                <div style="display: flex">
                                    <img
                                        src="https://github.com/hackclub.png"
                                        class="partylogo"
                                        style="margin: 0"
                                    />

                                    <div class="top-party-name">
                                        Tech Democrats
                                    </div>
                                </div>
                                <div class="top-party-tagline">
                                    "Technology for All"
                                </div>
                                <div class="party-stats">
                                    üë§ @sarah, @james<br />
                                    #Ô∏è‚É£ #TechForAll<br />
                                    ‚ù§Ô∏è 950 supporters
                                </div>
                            </div>
                        </div>
                        <div id="place3box" class="placebox">
                            <p style="text-align: center">
                                <span style="font-size: larger">
                                    3<sup style="font-size: small">rd</sup>
                                </span>
                                <br />
                                28 seats
                            </p>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="partyrow">
                        <div style="display: flex; align-items: center">
                            <h1 style="margin: 0 20px">4</h1>
                            <img
                                class="partylogo"
                                src="https://github.com/hackclub.png"
                                alt="Digital Freedom Party Logo"
                            />
                            <div class="party-info">
                                <span class="party-name"
                                    >Digital Freedom Party</span
                                >
                                <span class="party-tagline"
                                    >"Free Code, Free Future"</span
                                >
                                <div class="party-stats">
                                    üë§ @alex, @emma<br />
                                    #Ô∏è‚É£ #DigitalFreedom<br />
                                    ‚ù§Ô∏è 850 supporters
                                </div>
                            </div>
                        </div>
                        <div class="seats-count">
                            <span style="font-size: 32px">22</span>
                            <br />Seats
                        </div>
                    </div>
                </div>
            </div>

            <div id="rules" class="tab-content">
                <div id="constitution" class="constitution-section"></div>
            </div>
        </div>
        <script src="./data.js"></script>
        <script>
            document.getElementById("constitution").innerHTML =
                data.TextTabs.constitution;

            document.getElementById("logo").src = data.ParliamentLogo;
            document.title = data.nameOfParliament;

            // Create sorted array of parties
            let parties = Object.values(data.Parties)
                .map((party) => party)
                .sort((a, b) => b.Seats - a.Seats);

            // Function to format candidates
            function formatCandidates(candidates) {
                return Object.entries(candidates)
                    .map(([handle, link]) => `<a href="${link}">${handle}</a>`)
                    .join(", ");
            }

            // Handle top 3 parties
            parties.slice(0, 3).forEach((party, index) => {
                const place = index + 1;
                const suffix = place === 1 ? "st" : place === 2 ? "nd" : "rd";
                const placeId = `place${place}`;

                document.getElementById(placeId).innerHTML = `
                    <div class="placedetails">
                        <div class="top-party-info">
                            <div style="display: flex">
                                <img
                                    src="${party.Logo}"
                                    class="partylogo"
                                    style="margin: 0"
                                />
                                <div class="top-party-name">
                                    ${party.Name}
                                </div>
                            </div>

                            <div class="top-party-tagline"> 
                                "${party.Tagline}"
                            </div>
                            <div class="party-stats">
                                <span>üë§ ${formatCandidates(
                                    party.candidates
                                )}</span><br>
                                <span>#Ô∏è‚É£ <a href="${party.channelLink}">${
                    party.channelName
                }</a></span><br>
                                <span>‚ù§Ô∏è ${
                                    party.NoOfSupporters
                                } supporters</span>
                            </div>
                        </div>
                    </div>
                    <div id="place${place}box" class="placebox">
                        <p style="text-align: center">
                            <span style="font-size: larger">
                                ${place}<sup style="font-size: small">${suffix}</sup>
                            </span>
                            <br />
                            ${party.Seats} seats
                        </p>
                    </div>
                `;
            });

            // Generate rows for remaining parties
            const remainingPartiesHtml = parties
                .slice(3)
                .map(
                    (party, index) => `
                <div class="partyrow">
                    <div style="display: flex; align-items: center">
                        <h1 style="margin: 0 20px">${index + 4}</h1>
                        <img
                            class="partylogo"
                            src="${party.Logo}"
                            alt="${party.Name} Logo"
                        />
                        <div class="party-info">
                            <span class="party-name">${party.Name}</span>
                            <span class="party-tagline">"${
                                party.Tagline
                            }"</span>
                            <div class="party-stats">
                                üë§ ${formatCandidates(party.candidates)}<br>
                                #Ô∏è‚É£ <a href="${party.channelLink}">${
                        party.channelName
                    }</a><br>
                                ‚ù§Ô∏è ${party.NoOfSupporters} supporters
                            </div>
                        </div>
                    </div>
                    <div class="seats-count">
                        <span style="font-size: 32px">${party.Seats}</span>
                        <br />Seats
                    </div>
                </div>
            `
                )
                .join("");

            // Replace the remaining parties container
            document.querySelector("#parties > div:last-child").innerHTML =
                remainingPartiesHtml;

                parties = Object.values(data.Parties)
    .map((party) => ({
        name: party.Name,
        seats: party.Seats,
        logoUrl: party.Logo,
    }))
    .sort((a, b) => b.seats - a.seats);
        </script>
        <script src="script.js"></script>
    </body>
</html>
