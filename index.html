<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://fonts.googleapis.com/icon?family=Material+Icons"
            rel="stylesheet"
        />
        <style>
            @font-face {
                font-family: "PhantomSans";
                src: local("Arial"),
                    url("https://hc-cdn.hel1.your-objectstorage.com/s/v3/62e8bc6dca4899591b634e2e82f909c3e102aa19_trial_phantomsans0.8-book-bf65a9d4d054b5b.ttf")
                        format("truetype");
                font-display: swap;
            }
            body {
                margin: 0;
                padding: 0;
                background-color: var(--bg-color);
                color: var(--text-color);
                transition: all 0.3s ease;
            }

            * {
                font-family: "PhantomSans", -apple-system, BlinkMacSystemFont,
                    "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
                box-sizing: border-box;
            }

            #TopTopNav {
                background-color: var(--nav-bg);
                margin: 25px;
                padding: 30px;
                display: flex;
                justify-content: space-between;
                border-radius: 30px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                transition: transform 0.3s ease;
            }

            #TopTopNav:hover {
                transform: translateY(-2px);
            }

            #logo {
                height: 100px;
                transition: transform 0.3s ease;
            }

            #logo:hover {
                transform: scale(1.05);
            }

            #tabsTopNav {
                background-color: var(--nav-bg);
                margin: 25px;
                padding: 15px;
                display: flex;
                gap: 10px;
                justify-content: center;
                border-radius: 30px;
                margin-top: 0;
                margin-bottom: 0;
            }

            .pagesTabIntabsTopNavselected {
                background-color: #ec3750;
                border-radius: 30px;
                padding: 12px 25px;
                transition: all 0.3s ease;
                color: white !important;
            }

            .pagesTabIntabsTopNav {
                background: none;
                border-radius: 30px;
                padding: 12px 25px;
                transition: all 0.3s ease;
            }

            .pagesTabIntabsTopNav:hover {
                background-color: rgba(236, 55, 80, 0.2);
            }

            .pagesTabIntabsTopNavselected,
            .pagesTabIntabsTopNav {
                appearance: none;
                border: none;
                color: #ffffff;
                cursor: pointer;
                font-size: 16px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            #leadreboardoftop3partyes {
                background-color: var(--nav-bg);
                border-radius: 20px;
                margin: 25px;
                display: flex;
                justify-content: center;
                padding: 40px;
                gap: 40px;
                align-items: flex-end;
            }

            .placedetails {
                width: 280px;
                background-color: var(--card-bg);
                border-radius: 15px;
                height: 280px;
                padding: 25px;
                margin-bottom: 20px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
                transition: all 0.3s ease;
                background-size: cover;
                background-position: center;
                background-blend-mode: overlay;
                position: relative;
            }

            .placedetails::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: inherit;
                filter: blur(2px);
                z-index: -1;
                border-radius: 15px;
                opacity: 0.3;
            }

            .placedetails:hover {
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            }

            .placebox {
                width: 280px;
                height: 100%;
                margin: 10px;
                margin-bottom: 0;
                border-radius: 15px;
                display: grid;
                place-content: center;
                transition: all 0.3s ease;
            }
            #place1box {
                background-color: #33a1fd;
                height: 100px;
            }
            #place2box {
                background-color: #ffd700;
                height: 80px;
            }
            #place3box {
                background-color: #2ecc71;
                height: 60px;
            }

            .placebox p {
                color: #1a1a1a;
                font-weight: bold;
            }

            .partyrow {
                display: flex;
                margin: 25px;
                background-color: var(--nav-bg);
                padding: 20px;
                border-radius: 20px;
                justify-content: space-between;
                align-items: center;
                transition: transform 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }

            .partyrow:hover {
                transform: translateX(5px);
            }

            .partylogo {
                height: 120px;
                width: 120px;
                border-radius: 20px;
                margin: 15px;
                object-fit: cover;
                transition: transform 0.3s ease;
            }

            .partylogo:hover {
                transform: scale(1.05);
            }

            .party-info {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .party-name {
                font-size: 32px;
                color: #ec3750;
            }

            .party-tagline {
                font-style: italic;
                color: #888;
            }

            .party-stats {
                align-items: center;
                gap: 10px;
                color: #888;
            }

            .seats-count {
                text-align: center;
                padding: 20px;
                background-color: #ec3750;
                border-radius: 15px;
                color: white;
            }

            .tab-content {
                display: none;
            }

            .tab-content.active {
                display: block;
            }

            .top-party-info {
                text-align: center;
                height: 100%;
                display: flex;
                flex-direction: column;
                gap: 10px;
                position: relative;
                z-index: 1;
            }

            .top-party-name {
                color: #ec3750;
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 15px;
            }

            .top-party-stats {
                color: #888;
                font-size: 14px;
            }

            .material-icons {
                vertical-align: middle;
                font-size: 20px;
                margin-right: 4px;
            }

            .constitution-section {
                background-color: var(--nav-bg);
                border-radius: 20px;
                margin: 25px;
                padding: 30px;
            }

            .constitution-article {
                margin-bottom: 20px;
                padding: 20px;
                background-color: var(--card-bg);
                border-radius: 15px;
            }

            .constitution-article h3 {
                color: #ec3750;
                margin-top: 0;
            }

            .top-party-tagline {
                color: #888;
                font-style: italic;
                font-size: 14px;
            }

            #place1,
            #place2,
            #place3 {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 200px;
                transform-origin: bottom;
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .places {
                margin: 25px;
            }

            #place1:hover,
            #place2:hover,
            #place3:hover {
                transform: translateY(-10px);
            }

            .tab-system {
                position: relative;
                margin: 25px;
                display: flex;
                justify-content: center;
            }

            #tabsTopNav {
                background: var(--nav-bg);
                border-radius: 30px;
                padding: 5px;
                display: inline-flex;
                position: relative;
                z-index: 1;
            }

            .tab-indicator {
                position: absolute;
                height: calc(100% - 10px);
                border-radius: 25px;
                background: #ec3750;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 0;
            }

            .pagesTabIntabsTopNav,
            .pagesTabIntabsTopNavselected {
                position: relative;
                z-index: 2;
                padding: 12px 30px;
                font-size: 16px;
            }

            .party-stats span {
                margin-right: 5px;
            }

            .party-stats .symbol {
                display: inline-block;
                width: 20px;
                text-align: center;
                margin-right: 8px;
            }

            .theme-toggle {
                position: absolute;
                top: 20px;
                right: 20px;
                background: var(--nav-bg);
                border: 1px solid var(--text-color);
                border-radius: 20px;
                padding: 8px 16px;
                color: var(--text-color);
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: all 0.3s ease;
                z-index: 1000;
            }

            .theme-toggle:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            }

            /* Dark/Light theme variables */
            :root {
                --bg-color: #1a1a1a;
                --text-color: #ffffff;
                --nav-bg: #2d2d2d;
                --card-bg: #3d3d3d;
            }

            [data-theme="light"] {
                --bg-color: #f5f5f5;
                --text-color: #1a1a1a;
                --nav-bg: #ffffff;
                --card-bg: #f0f0f0;
            }

            .pagesTabIntabsTopNav {
                color: var(--text-color) !important;
            }

            /* Responsive design */
            @media (max-width: 768px) {
                #leadreboardoftop3partyes {
                    flex-direction: column;
                    align-items: center;
                }

                .partyrow {
                    flex-direction: column;
                    text-align: center;
                }

                .party-stats {
                    justify-content: center;
                }
            }
            #container {
                position: relative;
            }

            #tooltip {
                position: fixed;
                background: white;
                border: 1px solid #ccc;
                color: black;
                border-radius: 4px;
                padding: 8px;
                display: none;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                font-size: 14px;
                z-index: 100;
                pointer-events: none;
            }

            .seat {
                transition: transform 0.3s ease;
                cursor: pointer;
                transform-origin: center;
                transform-box: fill-box;
            }

            .seat:hover {
                transform: scale(1.5);
                z-index: 10;
            }

            .brand-card {
                background-color: var(--nav-bg);
                border-radius: 15px;
                padding: 20px;
                margin: 15px;
                display: grid;
                grid-template-columns: auto 1fr;
                gap: 20px;
            }

            .brand-preview {
                width: 200px;
                height: 200px;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: var(--card-bg);
                border-radius: 10px;
                padding: 10px;
            }

            .brand-preview svg {
                max-width: 100%;
                max-height: 100%;
            }

            .brand-controls {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .brand-name {
                font-size: 24px;
                color: var(--text-color);
                margin-bottom: 15px;
            }

            .brand-button-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }

            .brand-button {
                background-color: var(--card-bg);
                border: none;
                border-radius: 8px;
                padding: 10px;
                color: var(--text-color);
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .brand-button:hover {
                background-color: #ec3750;
                color: white;
            }

            .copy-success {
                color: #2ecc71;
                font-size: 12px;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .copy-success.show {
                opacity: 1;
            }

            #brand {
                padding: 20px;
            }
        </style>
    </head>
    <body>
        <button class="theme-toggle">
            <span class="material-icons">dark_mode</span>
            Theme
        </button>
        <div id="TopTopNav">
            <img id="logo" src="" alt="Hack Club Logo" />
            <div id="container">
                <svg id="parliament"></svg>
                <div id="tooltip"></div>
            </div>
        </div>
        <div style="display: flex; justify-content: center">
            <div class="tab-system">
                <div id="tabsTopNav">
                    <button class="pagesTabIntabsTopNav" data-tab="parties">
                        üë• Parties
                    </button>
                    <!-- Tabs will be dynamically added here -->
                    <div class="tab-indicator"></div>
                </div>
            </div>
        </div>
        <div id="root">
            <div id="parties" class="tab-content active">
                <div id="leadreboardoftop3partyes">
                    <div id="place2" class="places">
                        <div class="placedetails">
                            <div class="top-party-info">
                                <div style="display: flex">
                                    <img
                                        src="https://github.com/sampoder.png"
                                        class="partylogo"
                                        style="margin: 0"
                                    />

                                    <div class="top-party-name">
                                        Innovation Alliance
                                    </div>
                                </div>
                                <div class="top-party-tagline">
                                    "Breaking Barriers, Building Future"
                                </div>
                                <div class="party-stats">
                                    üë§ @sampoder, @claire<br />
                                    #Ô∏è‚É£ #InnovateHC<br />
                                    ‚ù§Ô∏è 1.2K supporters
                                </div>
                            </div>
                        </div>
                        <div id="place2box" class="placebox">
                            <p style="text-align: center">
                                <span style="font-size: larger">
                                    1<sup style="font-size: small">st</sup>
                                </span>
                                <br />
                                45 seats
                            </p>
                        </div>
                    </div>
                    <div id="place1" class="places">
                        <div class="placedetails">
                            <div class="top-party-info">
                                <div style="display: flex">
                                    <img
                                        src="https://github.com/hackclub.png"
                                        class="partylogo"
                                        style="margin: 0"
                                    />
                                    <div class="top-party-name">
                                        Progress Coders
                                    </div>
                                </div>

                                <div class="top-party-tagline">
                                    "Code Today, Shape Tomorrow"
                                </div>
                                <div class="party-stats">
                                    <span
                                        >üë§
                                        <a href="https://example.com">@max</a>,
                                        <a>@alice</a></span
                                    ><br />
                                    <span>#Ô∏è‚É£ <a>#ProgressiveCode</a></span
                                    ><br />
                                    <span>‚ù§Ô∏è 1.5K supporters</span>
                                </div>
                            </div>
                        </div>
                        <div id="place1box" class="placebox">
                            <p style="text-align: center">
                                <span style="font-size: larger">
                                    2<sup style="font-size: small">nd</sup>
                                </span>
                                <br />
                                35 seats
                            </p>
                        </div>
                    </div>
                    <div id="place3" class="places">
                        <div class="placedetails">
                            <div class="top-party-info">
                                <div style="display: flex">
                                    <img
                                        src="https://github.com/hackclub.png"
                                        class="partylogo"
                                        style="margin: 0"
                                    />

                                    <div class="top-party-name">
                                        Tech Democrats
                                    </div>
                                </div>
                                <div class="top-party-tagline">
                                    "Technology for All"
                                </div>
                                <div class="party-stats">
                                    üë§ @sarah, @james<br />
                                    #Ô∏è‚É£ #TechForAll<br />
                                    ‚ù§Ô∏è 950 supporters
                                </div>
                            </div>
                        </div>
                        <div id="place3box" class="placebox">
                            <p style="text-align: center">
                                <span style="font-size: larger">
                                    3<sup style="font-size: small">rd</sup>
                                </span>
                                <br />
                                28 seats
                            </p>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="partyrow">
                        <div style="display: flex; align-items: center">
                            <h1 style="margin: 0 20px">4</h1>
                            <img
                                class="partylogo"
                                src="https://github.com/hackclub.png"
                                alt="Digital Freedom Party Logo"
                            />
                            <div class="party-info">
                                <span class="party-name"
                                    >Digital Freedom Party</span
                                >
                                <span class="party-tagline"
                                    >"Free Code, Free Future"</span
                                >
                                <div class="party-stats">
                                    üë§ @alex, @emma<br />
                                    #Ô∏è‚É£ #DigitalFreedom<br />
                                    ‚ù§Ô∏è 850 supporters
                                </div>
                            </div>
                        </div>
                        <div class="seats-count">
                            <span style="font-size: 32px">22</span>
                            <br />Seats
                        </div>
                    </div>
                </div>
            </div>
            <div id="textTabs"></div>
            <div id="brand" class="tab-content">
                <!-- Brand cards will be dynamically inserted here -->
            </div>
        </div>
        <script src="./data.js"></script>
        <script>
            // Initialize global namespace
            window.parliamentApp = {};

            // Remove this line as it's trying to access content that doesn't exist yet
            // document.getElementById("constitution").innerHTML = data.TextTabs.constitution;

            document.getElementById("logo").src = data.ParliamentLogo;
            document.title = data.nameOfParliament;

            // Create sorted array of parties and make it global
            window.parliamentApp.parties = Object.values(data.Parties)
                .map((party) => ({
                    ...party,
                    name: party.Name,
                    seats: party.Seats,
                    logoUrl: party.Logo,
                }))
                .sort((a, b) => b.Seats - a.Seats);

            // Calculate total seats once
            window.parliamentApp.totalSeats =
                window.parliamentApp.parties.reduce(
                    (sum, party) => sum + party.seats,
                    0
                );
        </script>
        <script>
            const svg = document.getElementById("parliament");
            const tooltip = document.getElementById("tooltip");

            // SVG namespace for creating elements
            const svgNS = "http://www.w3.org/2000/svg";

            // Set up diagram parameters
            const seatSize = 24;
            const seatRadius = seatSize / 2;
            const seatSpacing = 4; // Space between seats
            const effectiveSeatSize = seatSize + seatSpacing;
            const maxRowCount = 10;

            // Distribute seats to fill semicircle evenly
            function distributeSeats() {
                // Calculate how many rows and seats per row
                const rows = [];
                let remainingSeats = window.parliamentApp.totalSeats;
                let maxWidthSeats = 0;

                for (
                    let rowIndex = 0;
                    rowIndex < maxRowCount && remainingSeats > 0;
                    rowIndex++
                ) {
                    const radius = effectiveSeatSize * (rowIndex + 2); // Start with a minimum radius
                    const rowCircumference = Math.PI * radius;
                    const maxPossibleSeats = Math.floor(
                        rowCircumference / effectiveSeatSize
                    );

                    // Fill row as much as possible
                    const seatsInRow = Math.min(
                        maxPossibleSeats,
                        remainingSeats
                    );

                    if (seatsInRow > 0) {
                        rows.push({
                            rowIndex,
                            radius,
                            seatsCount: seatsInRow,
                        });

                        remainingSeats -= seatsInRow;
                        maxWidthSeats = Math.max(maxWidthSeats, seatsInRow);
                    }
                }

                return { rows, maxWidthSeats };
            }

            // Place seats and calculate dimensions
            function placeSeats() {
                const { rows, maxWidthSeats } = distributeSeats();
                let seatCount = 0;
                let partyIndex = 0;
                let seatsPlacedInParty = 0;

                // Calculate SVG dimensions based on the diagram
                const maxRadius =
                    rows.length > 0
                        ? rows[rows.length - 1].radius + seatRadius
                        : 0;
                const svgWidth = maxRadius * 2 + seatSize;
                const svgHeight = maxRadius + seatSize;

                // Set SVG attributes with the calculated dimensions
                svg.setAttribute("width", svgWidth);
                svg.setAttribute("height", svgHeight);
                svg.setAttribute("viewBox", `0 0 ${svgWidth} ${svgHeight}`);

                // Calculate center point
                const centerX = svgWidth / 2;
                const centerY = svgHeight - seatRadius;

                // For each row
                rows.forEach((row) => {
                    const angleStep = Math.PI / (row.seatsCount - 1 || 1);

                    // For each seat in row
                    for (
                        let seatInRow = 0;
                        seatInRow < row.seatsCount;
                        seatInRow++
                    ) {
                        // Find current party
                        while (
                            seatsPlacedInParty >=
                            window.parliamentApp.parties[partyIndex].seats
                        ) {
                            partyIndex++;
                            seatsPlacedInParty = 0;
                        }

                        const party = window.parliamentApp.parties[partyIndex];

                        // Calculate angle (distribute seats evenly across 180 degrees)
                        let angle;
                        if (row.seatsCount === 1) {
                            angle = Math.PI / 2; // Place single seat at the top
                        } else {
                            angle =
                                (Math.PI * seatInRow) / (row.seatsCount - 1);
                        }

                        // Calculate position
                        const x = centerX + row.radius * Math.cos(angle);
                        const y = centerY - row.radius * Math.sin(angle);

                        // Create circle clip path
                        const clipPathId = `clip-${seatCount}`;
                        const clipPath = document.createElementNS(
                            svgNS,
                            "clipPath"
                        );
                        clipPath.setAttribute("id", clipPathId);

                        const clipCircle = document.createElementNS(
                            svgNS,
                            "circle"
                        );
                        clipCircle.setAttribute("cx", x);
                        clipCircle.setAttribute("cy", y);
                        clipCircle.setAttribute("r", seatRadius);

                        clipPath.appendChild(clipCircle);
                        svg.appendChild(clipPath);

                        // Create image (with circular clipping)
                        const image = document.createElementNS(svgNS, "image");
                        image.setAttribute("x", x - seatRadius);
                        image.setAttribute("y", y - seatRadius);
                        image.setAttribute("width", seatSize);
                        image.setAttribute("height", seatSize);
                        image.setAttribute("href", party.logoUrl);
                        image.setAttribute("clip-path", `url(#${clipPathId})`);
                        image.setAttribute("class", "seat");
                        image.setAttribute("data-party", party.name);

                        // Add mouse events with corrected tooltip positioning
                        image.addEventListener("mousemove", (event) => {
                            tooltip.innerText = party.name;
                            tooltip.style.left = `${event.clientX + 10}px`;
                            tooltip.style.top = `${event.clientY + 10}px`;
                            tooltip.style.display = "block";
                        });

                        image.addEventListener("mouseout", () => {
                            tooltip.style.display = "none";
                        });

                        svg.appendChild(image);

                        seatCount++;
                        seatsPlacedInParty++;
                    }
                });

                return { width: svgWidth, height: svgHeight };
            }

            // Initialize and get diagram dimensions
            const dimensions = placeSeats();

            // Update container dimensions
            document.getElementById(
                "container"
            ).style.width = `${dimensions.width}px`;
            document.getElementById(
                "container"
            ).style.height = `${dimensions.height}px`;
        </script>
        <script>
            document.getElementById("logo").src = data.ParliamentLogo;
            document.title = data.nameOfParliament;

            // Create sorted array of parties and make it global for other scripts
            window.parties = Object.values(data.Parties)
                .map((party) => ({
                    ...party,
                    name: party.Name,
                    seats: party.Seats,
                    logoUrl: party.Logo,
                }))
                .sort((a, b) => b.Seats - a.Seats);

            // Function to format candidates
            function formatCandidates(candidates) {
                return Object.entries(candidates)
                    .map(([handle, link]) => `<a href="${link}">${handle}</a>`)
                    .join(", ");
            }

            // Handle top 3 parties
            parties.slice(0, 3).forEach((party, index) => {
                const place = index + 1;
                const suffix = place === 1 ? "st" : place === 2 ? "nd" : "rd";
                const placeId = `place${place}`;

                document.getElementById(placeId).innerHTML = `
                    <div class="placedetails">
                        <div class="top-party-info">
                            <div style="display: flex">
                                <img
                                    src="${party.Logo}"
                                    class="partylogo"
                                    style="margin: 0"
                                />
                                <div class="top-party-name">
                                    ${party.Name}
                                </div>
                            </div>

                            <div class="top-party-tagline"> 
                                "${party.Tagline}"
                            </div>
                            <div class="party-stats">
                                <span>üë§ ${formatCandidates(
                                    party.candidates
                                )}</span><br> 
                                <span>#Ô∏è‚É£ <a href="${party.channelLink}">${
                    party.channelName
                }</a></span><br>
                                <span>‚ù§Ô∏è ${
                                    party.NoOfSupporters
                                } supporters</span>
                            </div>
                        </div>
                    </div>
                    <div id="place${place}box" class="placebox">
                        <p style="text-align: center">
                            <span style="font-size: larger">
                                ${place}<sup style="font-size: small">${suffix}</sup>
                            </span>
                            <br />
                            ${party.Seats} seats
                        </p>
                    </div>
                `;
            });

            // Generate rows for remaining parties
            const remainingPartiesHtml = parties
                .slice(3)
                .map(
                    (party, index) => `
                    <div class="partyrow">
                        <div style="display: flex; align-items: center">
                            <h1 style="margin: 0 20px">${index + 4}</h1>
                            <img
                                class="partylogo"
                                src="${party.Logo}"
                                alt="${party.Name} Logo"
                            />
                            <div class="party-info">
                                <span class="party-name">${party.Name}</span>
                                <span class="party-tagline">"${
                                    party.Tagline
                                }"</span>
                                <div class="party-stats">
                                    üë§ ${formatCandidates(party.candidates)}<br>
                                    #Ô∏è‚É£ <a href="${party.channelLink}">${
                        party.channelName
                    }</a><br>
                                    ‚ù§Ô∏è ${party.NoOfSupporters} supporters
                                </div>
                            </div>
                        </div>
                        <div class="seats-count">
                            <span style="font-size: 32px">${party.Seats}</span>
                            <br />Seats
                        </div>
                    </div>
                `
                )
                .join("");

            // Replace the remaining parties container
            document.querySelector("#parties > div:last-child").innerHTML =
                remainingPartiesHtml;

            // Handle text tabs
            const tabsContainer = document.getElementById("tabsTopNav");
            const textTabsContainer = document.getElementById("textTabs");

            // Create brand tab button first
            const brandButton = document.createElement("button");
            brandButton.className = "pagesTabIntabsTopNav";
            brandButton.setAttribute("data-tab", "brand");
            brandButton.innerHTML =
                '<span class="material-icons">brush</span> Brand';
            tabsContainer.insertBefore(
                brandButton,
                tabsContainer.lastElementChild
            );

            // Create text tabs
            Object.entries(data.TextTabs).forEach(([tabId, tabData]) => {
                // Create tab button
                const button = document.createElement("button");
                button.className = "pagesTabIntabsTopNav";
                button.setAttribute("data-tab", tabId);
                button.innerHTML = `<span class="material-icons">${tabData.icon}</span> ${tabData.title}`;
                tabsContainer.insertBefore(
                    button,
                    tabsContainer.lastElementChild
                );

                // Create tab content
                const contentDiv = document.createElement("div");
                contentDiv.id = tabId;
                contentDiv.className = "tab-content constitution-section";

                const content = tabData.content
                    .map(
                        (item) => `
                        <div class="constitution-article">
                            <h3>${item.heading}</h3>
                            <p>${item.text}</p>
                        </div>
                    `
                    )
                    .join("");

                contentDiv.innerHTML = content;
                textTabsContainer.appendChild(contentDiv);
            });

            const indicator = document.querySelector(".tab-indicator");

            function updateIndicator(element) {
                requestAnimationFrame(() => {
                    indicator.style.width = `${element.offsetWidth}px`;
                    indicator.style.left = `${element.offsetLeft}px`;
                });
            }

            function switchTab(tab) {
                const tabs = document.querySelectorAll("#tabsTopNav button");
                tabs.forEach((t) => {
                    t.classList.remove("pagesTabIntabsTopNavselected");
                    t.style.color = "#ffffff";
                });

                tab.classList.add("pagesTabIntabsTopNavselected");

                document
                    .querySelectorAll(".tab-content")
                    .forEach((content) => content.classList.remove("active"));

                const tabName = tab.getAttribute("data-tab");
                document.getElementById(tabName).classList.add("active");

                updateIndicator(tab);
            }

            // Add click handlers to all tabs
            document.querySelectorAll("#tabsTopNav button").forEach((tab) => {
                tab.addEventListener("click", () => switchTab(tab));
            });

            // Initialize the first tab
            document
                .querySelector('[data-tab="parties"]')
                .classList.add("pagesTabIntabsTopNavselected");
            updateIndicator(
                document.querySelector(".pagesTabIntabsTopNavselected")
            );

            // Add theme toggle functionality
            const themeToggle = document.querySelector(".theme-toggle");
            themeToggle.addEventListener("click", () => {
                document.documentElement.setAttribute(
                    "data-theme",
                    document.documentElement.getAttribute("data-theme") ===
                        "light"
                        ? "dark"
                        : "light"
                );
                themeToggle.querySelector(".material-icons").textContent =
                    document.documentElement.getAttribute("data-theme") ===
                    "light"
                        ? "light_mode"
                        : "dark_mode";
            });

            // Create brand tab button

            // Create brand content
            const brandContainer = document.getElementById("brand");
            data.Brand.forEach((brand) => {
                const card = document.createElement("div");
                card.className = "brand-card";

                card.innerHTML = `
                    <div class="brand-preview">
                        <img src="${brand.svg}" alt="${brand.name}" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <div class="brand-controls">
                        <div class="brand-name">${brand.name}</div>
                        <button class="brand-button copy-path-btn" style="margin-bottom: 10px;">Copy SVG Path</button>
                        <div class="brand-button-grid">
                            <button class="brand-button" onclick="window.open('${brand.svg}', '_blank')">Download SVG</button>
                            <button class="brand-button" onclick="window.open('${brand.png}', '_blank')">Download PNG</button>
                            <button class="brand-button copy-svg-btn">Copy SVG Image</button>
                            <button class="brand-button copy-png-btn">Copy PNG Image</button>
                        </div>
                        <div class="copy-success">Copied!</div>
                    </div>
                `;

                // Add copy functionality
                const copyPath = card.querySelector(".copy-path-btn");
                copyPath.addEventListener("click", async () => {
                    try {
                        const response = await fetch(brand.svg);
                        const text = await response.text();
                        await navigator.clipboard.writeText(text);
                        showCopySuccess(copyPath);
                    } catch (err) {
                        console.error("Failed to copy:", err);
                    }
                });

                const copySvg = card.querySelector(".copy-svg-btn");
                copySvg.addEventListener("click", async () => {
                    try {
                        await copyImageToClipboard(brand.svg);
                        showCopySuccess(copySvg);
                    } catch (err) {
                        console.error("Failed to copy image:", err);
                    }
                });

                const copyPng = card.querySelector(".copy-png-btn");
                copyPng.addEventListener("click", async () => {
                    try {
                        await copyImageToClipboard(brand.png);
                        showCopySuccess(copyPng);
                    } catch (err) {
                        console.error("Failed to copy image:", err);
                    }
                });

                brandContainer.appendChild(card);
            });

            function showCopySuccess(button) {
                const successMsg = button
                    .closest(".brand-controls")
                    .querySelector(".copy-success");
                successMsg.classList.add("show");
                setTimeout(() => successMsg.classList.remove("show"), 2000);
            }

            async function copyImageToClipboard(url) {
                try {
                    const response = await fetch(url);
                    const blob = await response.blob();
                    const item = new ClipboardItem({ [blob.type]: blob });
                    await navigator.clipboard.write([item]);
                } catch (err) {
                    console.error("Failed to copy image:", err);
                }
            }
        </script>
    </body>
</html>
